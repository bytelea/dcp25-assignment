import os
from typing import List, Dict

from configurations import BOOKS_DIR


def parse_abc_file(file_path: str) -> List[Dict]:
    """
    Read one .abc file and extract all tunes inside it.

    Each tune:
      - starts with a line 'X:'
      - optionally has header lines like T:, R:, M:, K:
      - then has a body (music notation)
    Returns a list of dictionaries, one per tune.
    """
    tunes = []
    current_tune = None
    body_lines: List[str] = []

    book_name = os.path.basename(os.path.dirname(file_path))
    filename = os.path.basename(file_path)
